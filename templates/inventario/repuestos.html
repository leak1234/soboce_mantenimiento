{% extends 'base.html' %}

{% block content %}
<h1 class="text-xl font-bold mb-6">ğŸ“¦ Inventario de Repuestos</h1>

<form method="get" class="filtros-form" style="margin-bottom: 1rem;">
    <div class="filtros-grid">
        <div class="filtro-item">
            <label for="nombre">ğŸ” Nombre:</label>
            <input type="text" name="nombre" id="nombre" placeholder="Repuesto..." value="{{ request.args.get('nombre', '') }}">
        </div>

        <div class="filtro-item">
            <label for="proveedor">ğŸ¢ Proveedor:</label>
            <input type="text" name="proveedor" id="proveedor" placeholder="Proveedor..." value="{{ request.args.get('proveedor', '') }}">
        </div>

        <div class="filtro-item">
            <label for="stock">ğŸ“¦ Stock mÃ­nimo:</label>
            <input type="number" name="stock" id="stock" min="0" value="{{ request.args.get('stock', '') }}">
        </div>

        <div class="filtro-item filtro-btns">
            <label>&nbsp;</label>
            <button type="submit">ğŸ” Buscar</button>
            <a href="{{ url_for('inventario.lista_repuestos') }}" class="btn">ğŸ”„ Limpiar</a>
        </div>
    </div>
</form>


<a href="{{ url_for('inventario.nuevo_repuesto') }}" class="btn mb-4">â• Nuevo Repuesto</a>

<table class="table-auto w-full bg-white shadow-md rounded border-collapse">
    <thead class="bg-blue-600 text-white">
        <tr>
            <th class="p-3 text-left">ğŸ”§ Nombre</th>
            <th class="p-3 text-left">ğŸ“„ DescripciÃ³n</th>
            <th class="p-3 text-left">ğŸ“¦ Stock</th>
            <th class="p-3 text-left">ğŸ“ Unidad</th>
            <th class="p-3 text-left">ğŸ’° Precio</th>
            <th class="p-3 text-left">ğŸ¢ Proveedor</th>
            <th class="p-3 text-center">âš™ï¸ Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for r in repuestos %}
        <tr class="border-b hover:bg-gray-100">
            <td class="p-3">{{ r[1] }}</td>
            <td class="p-3">{{ r[2] }}</td>
            <td class="p-3">{{ r[3] }}</td>
            <td class="p-3">{{ r[4] }}</td>
            <td class="p-3">Bs. {{ r[5] }}</td>
            <td class="p-3">{{ r[6] }}</td>
            <td class="p-3 text-center">
                <a href="{{ url_for('inventario.editar_repuesto', id=r[0]) }}" class="btn">âœï¸ Editar</a>
                <form action="{{ url_for('inventario.eliminar_repuesto', id=r[0]) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Â¿Eliminar repuesto?')">ğŸ—‘ï¸ Eliminar</button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="7" class="p-4 text-center text-gray-500">No hay repuestos registrados.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
